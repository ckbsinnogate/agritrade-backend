[
  {
    "test_name": "Email Configuration",
    "success": true,
    "message": "Mailtrap email configuration detected",
    "timestamp": "2025-08-03T19:32:21.008919",
    "details": {
      "EMAIL_HOST": "sandbox.smtp.mailtrap.io",
      "EMAIL_PORT": 2525,
      "EMAIL_HOST_USER": "5a06a8a300b393",
      "EMAIL_USE_TLS": true,
      "DEFAULT_FROM_EMAIL": "AgriConnect <noreply@agriconnect.com>"
    }
  },
  {
    "test_name": "OTP Generation (registration)",
    "success": true,
    "message": "OTP sent successfully",
    "timestamp": "2025-08-03T19:32:26.945991",
    "details": {
      "otp_code": "418741",
      "expires_at": "2025-08-04T02:42:21.308026+00:00",
      "purpose": "registration"
    }
  },
  {
    "test_name": "OTP Validation (registration)",
    "success": true,
    "message": "OTP is valid",
    "timestamp": "2025-08-03T19:32:26.946663",
    "details": {
      "code_length": 6,
      "is_numeric": true,
      "expires_in_minutes": 9
    }
  },
  {
    "test_name": "OTP Generation (login)",
    "success": true,
    "message": "OTP sent successfully",
    "timestamp": "2025-08-03T19:32:31.619288",
    "details": {
      "otp_code": "693150",
      "expires_at": "2025-08-04T02:42:27.951670+00:00",
      "purpose": "login"
    }
  },
  {
    "test_name": "OTP Validation (login)",
    "success": true,
    "message": "OTP is valid",
    "timestamp": "2025-08-03T19:32:31.619928",
    "details": {
      "code_length": 6,
      "is_numeric": true,
      "expires_in_minutes": 9
    }
  },
  {
    "test_name": "OTP Generation (password_reset)",
    "success": true,
    "message": "OTP sent successfully",
    "timestamp": "2025-08-03T19:32:36.524011",
    "details": {
      "otp_code": "495860",
      "expires_at": "2025-08-04T02:42:32.625916+00:00",
      "purpose": "password_reset"
    }
  },
  {
    "test_name": "OTP Validation (password_reset)",
    "success": true,
    "message": "OTP is valid",
    "timestamp": "2025-08-03T19:32:36.524542",
    "details": {
      "code_length": 6,
      "is_numeric": true,
      "expires_in_minutes": 9
    }
  },
  {
    "test_name": "OTP Verification (Correct)",
    "success": true,
    "message": "OTP verified successfully",
    "timestamp": "2025-08-03T19:32:42.964013",
    "details": {
      "attempted_code": "696730",
      "verification_status": "verified"
    }
  },
  {
    "test_name": "OTP Verification (Incorrect)",
    "success": true,
    "message": "Internal error: null value in column \"email_otp_id\" of relation \"email_otp_attempts\" violates not-null constraint\nDETAIL:  Failing row contains (2, 000000, f, 127.0.0.1, , 2025-08-04 02:32:42.970695+00, 4, , null).\n",
    "timestamp": "2025-08-03T19:32:44.366494",
    "details": {
      "attempted_code": "000000",
      "expected_result": "failure"
    }
  },
  {
    "test_name": "Rate Limiting",
    "success": true,
    "message": "Rate limiting activated after 5 sends",
    "timestamp": "2025-08-03T19:33:03.274962",
    "details": {
      "total_sends": 5,
      "rate_limited": true,
      "last_message": "Rate limit exceeded: Hourly limit exceeded (5/hour)"
    }
  },
  {
    "test_name": "OTP Expiry",
    "success": true,
    "message": "OTP expiry mechanism working correctly",
    "timestamp": "2025-08-03T19:33:07.088665",
    "details": {
      "valid_before_expiry": true,
      "is_expired": true,
      "valid_after_expiry": false
    }
  },
  {
    "test_name": "OTP Cleanup",
    "success": true,
    "message": "Cleanup function executed successfully",
    "timestamp": "2025-08-03T19:33:08.292633",
    "details": {
      "otps_before_cleanup": 10,
      "otps_after_cleanup": 10,
      "otps_cleaned": 0
    }
  },
  {
    "test_name": "OTP Statistics",
    "success": true,
    "message": "Statistics generated successfully",
    "timestamp": "2025-08-03T19:33:08.300714",
    "details": {
      "total_sent": 10,
      "verified": 1,
      "expired": 6,
      "failed": 0,
      "pending": 3,
      "success_rate": 10.0,
      "by_purpose": {
        "registration": 8,
        "login": 1,
        "password_reset": 1
      }
    }
  }
]